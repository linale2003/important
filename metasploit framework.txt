I)Введение в Metasploit Framework

Metasploit- это плотформа для тестирования,поиска и использования уязвимостей.Она включает фреймворки Metasploit и их коммерческие аналоги:Metasploit Pro,Express,Community и Nexpose Ultimate;

Работа с модулем состоит из следующих шагов:
1)Поиск подходящего модуля с помощью команды search или Google
2) Выбор модуля с помощью команды use
3)Просмотр настроек выбранного модуля с помощью команд show options(Продвинутые настройки-show advanced)
4)Установка конкретной опции с помощью команды set.Самыми часто задаваемыми опциямии являются RHOST и RHOSTS.В первом случае можно задать только один адрес цели,а во втором- множество
5)Установка подробного вывода с помощью команды set verbose true(если любопытно знать,что происходит)
6)Запуск модуля с помощью команды run

Metasploit может использоватьсч при пентестинге для создания отчетов,совместно с другими системами автоматического обнаружения уязвимостей.С помощью этого фреймворка можно установить,являются ли уязвимости реально опасными и можно ли ими воспользоваться для проникновения в систему

Metasploit может использоваться для тестинга новых эксплоитов,которые появляютя буквально каждый день.Такую проверку вы можете делать на локальном сервере,специально предназначенном для этих целей.С помощью этого фреймворка вы легко можете проверить,эффективен ли новый эксплоит или нет(exploit-db.com)

Metasploit также является великолепным инструментом в ваших системах пентестинга для проверки,настроен ли должным образом IDS в случае возникновения атак.

Система обнаружения вторжении(СОВ)-програмнное или аппаратное средство,предназначенное для выявления фактор неавторизованного доступа в компьютерную систему или сеть либо несакционированного управления ими в основном через Интернет

Соответствующий английский термин-Intrusion Detection System(IDS).Системы обнаружения вторжении обеспечивают дополнительный уровень защиты компьютерных систем

II)Этичный хакинг
Этичный хакинг- это законная форма взлома,с помощью которого можно найти ошибки в чужих системах и обратить на них внимание разработчиков.Этим занимаются белые хакеры(White Hat)

Им противостоят другие хакеры(Black Hat)-преступники,которые используют свои знания со злым умыслом.Если первые ищут уязвимости,чтобы залатать брешь в безопасновсти системы,то вторые стремятся взломать ее ,чтобы скомпрометировать
Этапы хакинга:
1)Сбор информации об атакуемом объекте
Ip-адреса/доменные имена;
Whois/DNS-записи
Email/Телефоны
2)Сканирования:
Определнение операционных систем
Сканирование портов
Сканирование на уязвимость
Определение пользователей и разделяемы3х ресурсов
3)Получение доступа/Эксплуатация
4)Пост-эксплуатация:
Cбор информации
Закрепление доступа
Атака на другие машины
Сокрытие следов взлома

Первый этап реализации атак -это сбор информации об атакуемой системе или узле.Он включает такие действия как определение сетевой топологии,типа и версии операционной системы атакуемого узла,а также доступных сетевых и иных сервисов(на этом этапе преступника не поймать,ведь это просто сбор информации)

Третий этап(получение доступа/Эксплуатация)
с Этого момента начинается попытка доступка к атакуемому узлу.При этом доступ может быть как непосредственный,т.е проникновение на узел,так и осоредованный,например,при реализации атаки тип <отказ в обслуживании>Реализация атак в случае непосредственного доступа также может быть разделена на два этапка:
проникновение 
установление контроля

четвертый этап(пост-эксплуатация)-это то,что можно сделать с целевой системой после того,как удалось найти уязвимость и выполнить какой-то участок кода на целевой системе
Также под этим термином понимается один из этапов взлома компьютерных систем(фаза) позволяющая собирать дальнейшую информацию о целевой системе,получить дальнейший доступ к сети и хранящимся данным

Фаза пост-эксплуатации позволяет идентифицировать такие вещи ,как дополнительные подсети,маршрутизаторы,названия серверов,сетевых служб и установленных приложений

III)Модули Metasploit Framework
Сердце Metasploit-библиотека Rex.Она требуется для операции общего назначения:работы с сокетами,протоколами,форматирования текста,работы с кодировками и подобных.На ней базируется библиотека MSF Core,которая предоставляет базовый функционал и низкоуровневый API. 
Его использует библиотека MSF Base,которая,в свою очередь,предоставляет API для плагинов,интерфейса пользователя(как консольного,так и графического),а также подключаемых модулей

Все модули делятся на несаколько типов,в зависимости от предоставляемой функциональности:
Exploit(Эксплойт)-код ,эксплуатирующий определенную уязвимость на целевой системе(например,переполнение стека):В Metasploit эксплойты разбиты по типу операционной системы ,а также по категориям программ.
Payload(Полезная нагрузка)-код,который запускается на целевой системе после того,как отработал эксплойт(устанавливает соединение,выполняет шелл-скрипт и прочеее):
Singles-самостоятельный файл(объединяет два модуля)
Stagers-Устанавливает связь с атакующим и загружает Stager
Stages-Выполняет основное действие:похищение паролей,загрузка backdoor и тд

Post(Послеэксплуатационный)-код,который запускается на системе после успешного пронкновения(например,собирает пароли,скачивает файлы):
В Metasploit Post работы по типу операционной системы,а также по категориям программ

Encoder-инструмент для обфукации модулей,с целью маскировки от антивирусов.
NOP-генераторы NOP'ов.Это ассемблерная инструкция,которая не производит никаких действий.Используется,чтобы заполнять пустоту в исполяемый файлах,для подгонки под необходимый размер
Auxiliary(Дополнительный)-модули для сканирования сети,анализ трафика и так далее


IV-Установка и инициализация база данных в Metasploit Framework

systemctl start postgresql-запустить службу
sudo msfdb init-инициализация база данных
хранение база данных(паролей)-в директории usr/share/metasplot-framework/config/detabase.yml
db_disconnect-отключение база данных
db_connect -y /usr/share/metasploit-framework/config/database.yml-подключение база данных

V)Сканирование портов с NMAP

Nmap-это утилита с открытым исходным кодом для исследования сети и проверки безопасности
Программа Nmap или Network Mapper была разработана Гордоном Луоном и на данный момент используется специалистами по безопасности и системными администраторами по всему мира

Эта программа помогает системным админстраторам очень быстро понять какие компьютеры подключены к сети,узнать их имена,а также посмотреть какое программное обеспечение на них установлено,какая операционная система и какие типы фильтров применяются

Как работает Nmap?
В компьютерных сетях все подключенные устройства имею свой ip-адрес .Каждый компьютер поддерживает протокол ping ,с помощью которого можно определить подключен ли он к сети

мы просто отправляем ping запрос компьютеру,и если он отзывается,то считаем ,что он подключен.Nmap использует немного иной подход.Компьютеры также определеным образом реагируют на те или иные сетевые пакеты,утилитта просто отправляет нужные пакеты и смотрит какие хосты прислали ответ

утилита nmap в процессе сканирования сети перебирает доступный диапазон портов и пытается подключиться к каждому из них.
Если подключение удалось,в большинстве случает,передав несколько пакетов программа может даже узнать версию программного обеспечения,которые ожидает подключений к этому порту 

Синтаксис Nmap
команда запуска Nmap очень просто для этого достаточно ппередать ей в параметрах целевой IP-адрес или сеть,а также указать опции при необходимости:
nmap опции адрес

Options in Nmap:
-sL-просто создать список работающих хостов,но не сканировать порты nmap
-sP-только проверять доступен ли хост с помощью ping
-PN-считать все хосты доступными,даже если онпи не отвечают на ping
-sS/sT/sA/sW/sM -TCP сканирование
-sU- UDP сканирование nmap;
-sN/sF/sX - TCP NULL и FIN сканирование;
-sC -запускать скрипт по умолчанию
-sI - ленирове Indle сканирование
-p -указать диапазон портов для проверки
-sV - детальное исследование портов для определния версий служб;
-O - определять операционную систему
-T[0-5] -скорость сканирования,чем больше,тем быстрее
-D - маскировать сканирование с помощью фиктифных IP;
-S- изменить свой IP-адрес на указанный
-e -использовать определнный интерфейс
--spoof-mac -установить свой MAC адрес
-A -определние операционной системы с помощью скриптов


sudo nmap -A --reason(что скажет удаленная система) <ip-адрес> -p(показывает все порты) 0-650000 oX/home/eternal/Desktop/scan.xml (записать в файл в формате Xl) -просканировать все порты
Приеры команд Nmap:
Сканирование одного IP- nmap 192.168.1.1
Сканирование хсота nmap randomsite.com
Сканирование хоста с дополнительной информацией nmap -v randomsite.com

Zenmap-официальный GUI для программы Nmap Security Scanner.Программа написана на языке Python (работает на платформах,на которых работают Python и nmap).Распространяется на условиях свободной GNU General Public License

bwap-площадка для тестинга веб уязвимостей

Сайт с уязвимыми виртуальными машинами:vulnhub.com

Сброс пароль в linux:
При запускании машины быстро нажимаем E(пытаемся зайти в граб(программа в linux,которая помогает запускать операционную систему))